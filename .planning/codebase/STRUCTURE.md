# Codebase Structure

**Analysis Date:** 2026-01-09

## Directory Layout

```
newtab_notes/
├── .planning/              # Planning documents (new)
│   └── codebase/          # Codebase documentation
├── src/                   # Source code (1867 lines total)
│   ├── newtab/           # Main application
│   │   ├── index.html    # Entry point - DOM structure
│   │   ├── index.js      # Main controller (379 lines)
│   │   └── styles.css    # All styling
│   ├── services/         # Business logic (6 files, 913 lines)
│   │   ├── storage.js
│   │   ├── notes.js
│   │   ├── folders.js
│   │   ├── search.js
│   │   ├── wallpaper.js
│   │   └── recent-websites.js
│   └── utils/            # Helpers (2 files, 375 lines)
│       ├── helpers.js
│       └── quill-config.js
├── public/               # Static assets
│   ├── icons/           # Extension icons (4 sizes)
│   └── lib/             # Quill.js library
│       ├── quill.js
│       └── quill.snow.css
├── dist/                # Build output
├── node_modules/        # npm dependencies
├── manifest.json        # Chrome extension config
├── package.json         # Project metadata
├── vite.config.js       # Build configuration
└── README.md           # User documentation
```

## Directory Purposes

**src/**
- Purpose: All application source code
- Contains: JavaScript modules, HTML templates, CSS
- Key entry: `src/newtab/index.html` (new tab override)
- Subdirectories: `newtab/`, `services/`, `utils/`

**src/newtab/**
- Purpose: Main application UI and controller
- Contains:
  - `index.html` - DOM structure with modals (193 lines)
  - `index.js` - Application logic, event handlers (379 lines)
  - `styles.css` - Complete styling (Notion-inspired)
- Entry point: `index.html` loaded by Chrome on new tab

**src/services/**
- Purpose: Business logic layer with service classes
- Contains: Static service classes for domain operations
- Key files:
  - `storage.js` (216 lines) - Chrome Storage API wrapper
  - `notes.js` (236 lines) - Note CRUD, checklist extraction
  - `folders.js` (143 lines) - Folder management
  - `search.js` (162 lines) - Search indexing and filtering
  - `wallpaper.js` (224 lines) - Image upload/compression
  - `recent-websites.js` (132 lines) - Website tracking
- Pattern: All exports are static classes (no instances)

**src/utils/**
- Purpose: Reusable utility functions and configuration
- Contains:
  - `helpers.js` (204 lines) - 15 pure utility functions
  - `quill-config.js` (171 lines) - Quill editor config, Delta utilities
- No dependencies on services (pure functions)

**public/**
- Purpose: Static assets bundled with extension
- Contains:
  - `icons/` - Extension icons (16px, 32px, 48px, 128px)
  - `lib/` - Quill.js library files (local copy for CSP compliance)
- Copied to `dist/` during build

**dist/**
- Purpose: Build output directory
- Source: Not committed (in `.gitignore`)
- Generated by: `npm run build` (Vite)
- Contents: Bundled JS, copied assets, manifest, icons
- Usage: Load this folder as unpacked extension in Chrome

## Key File Locations

**Entry Points:**
- `src/newtab/index.html` - Primary entry point, Chrome new tab override
- `src/newtab/index.js` - JavaScript entry (loaded as ES module)

**Configuration:**
- `manifest.json` - Chrome extension manifest V3
- `package.json` - npm dependencies and scripts
- `vite.config.js` - Build tool configuration
- No TypeScript config (pure JavaScript)

**Core Logic:**
- `src/services/storage.js` - Storage abstraction layer
- `src/services/notes.js` - Note operations
- `src/newtab/index.js` - Main controller

**Testing:**
- None found - No test directory or test files

**Documentation:**
- `README.md` - User-facing documentation (206 lines)
- Multiple markdown files in root (TESTING.md, DEPLOYMENT.md, QUICKSTART.md, etc.)

## Naming Conventions

**Files:**
- kebab-case for all files: `recent-websites.js`, `quill-config.js`
- index.js for main entry points
- No .test.js or .spec.js files (no tests)

**Directories:**
- kebab-case: `newtab/`, `services/`, `utils/`
- Plural for collections: `services/`, `utils/`
- Singular for features: `newtab/`

**Special Patterns:**
- `index.html`, `index.js` - Main entry points
- `*.service.js` pattern NOT used (just `notes.js`, not `notes.service.js`)
- Configuration files at root: `manifest.json`, `vite.config.js`

## Where to Add New Code

**New Feature:**
- Primary code: `src/services/{feature-name}.js` (if business logic)
- UI code: `src/newtab/index.js` (controller updates)
- Tests: Currently no test structure (would need to create `tests/` or co-locate)
- Config if needed: Update `manifest.json` for permissions

**New Service:**
- Implementation: `src/services/{service-name}.js`
- Pattern: Static class exporting methods
- Import in: `src/newtab/index.js` or other services
- Example: `class NewService { static async doSomething() { ... } }`

**New Utility:**
- Implementation: `src/utils/{utility-name}.js`
- Pattern: Export pure functions
- Example: `export function newHelper() { ... }`

**UI Changes:**
- HTML structure: `src/newtab/index.html`
- Styling: `src/newtab/styles.css`
- Behavior: `src/newtab/index.js`

## Special Directories

**dist/**
- Purpose: Build output
- Source: Generated by Vite
- Committed: No (in `.gitignore`)
- Contents: Bundled app ready for Chrome

**public/**
- Purpose: Static assets copied as-is during build
- Source: Committed
- Contents: Icons and Quill.js library
- Why: CSP requires local copies (no CDN)

**node_modules/**
- Purpose: npm dependencies
- Committed: No (in `.gitignore`)
- Install: `npm install`

**.planning/**
- Purpose: Project planning and documentation
- Source: Created by GSD workflow
- Contents: Codebase analysis documents
- New: Just created during this analysis

---

*Structure analysis: 2026-01-09*
*Update when directory structure changes*
